% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{article}
\usepackage{amsmath,amssymb}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math} % this also loads fontspec
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else
  % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\usepackage[margin=1in]{geometry}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{multirow}
\usepackage{wrapfig}
\usepackage{float}
\usepackage{colortbl}
\usepackage{pdflscape}
\usepackage{tabu}
\usepackage{threeparttable}
\usepackage{threeparttablex}
\usepackage[normalem]{ulem}
\usepackage{makecell}
\usepackage{xcolor}
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\usepackage{bookmark}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same}
\hypersetup{
  hidelinks,
  pdfcreator={LaTeX via pandoc}}

\author{}
\date{\vspace{-2.5em}}

\begin{document}

\subsection{Figure 1 Tables}\label{figure-1-tables}

\begin{Shaded}
\begin{Highlighting}[]
\PreprocessorTok{{-}{-}{-}}
\FunctionTok{title}\KeywordTok{:}\AttributeTok{ }\StringTok{"NHANES Data Exploration"}
\FunctionTok{output}\KeywordTok{:}\AttributeTok{ html\_document}
\PreprocessorTok{{-}{-}{-}}
\end{Highlighting}
\end{Shaded}

\subsubsection{Filtering Demographic
Data}\label{filtering-demographic-data}

\paragraph{Individuals included in all
surveys}\label{individuals-included-in-all-surveys}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Load libraries}
\FunctionTok{library}\NormalTok{(tidyverse)}
\FunctionTok{library}\NormalTok{(haven)}
\FunctionTok{library}\NormalTok{(stringr)}
\FunctionTok{library}\NormalTok{(purrr)}
\FunctionTok{library}\NormalTok{(DT)}

\CommentTok{\# read in the data (update the file paths if needed)}
\NormalTok{DI\_data1 }\OtherTok{\textless{}{-}} \FunctionTok{read\_xpt}\NormalTok{(}\StringTok{"../Data/DietaryInterview/2007{-}2008/DR1IFF\_Edietary{-}interview{-}1{-}07{-}08.xpt"}\NormalTok{)}
\NormalTok{demoData }\OtherTok{\textless{}{-}} \FunctionTok{read\_xpt}\NormalTok{(}\StringTok{"../Data/DemographicData/DEMO\_E\_Gooddemographic07{-}08.xpt"}\NormalTok{)}

\NormalTok{partIDs }\OtherTok{\textless{}{-}} \FunctionTok{unique}\NormalTok{(DI\_data1}\SpecialCharTok{$}\NormalTok{SEQN)}

\NormalTok{POP\_files }\OtherTok{\textless{}{-}} \StringTok{"../Data/LaboratoryData"}
\NormalTok{POP\_subdir }\OtherTok{\textless{}{-}} \FunctionTok{list.dirs}\NormalTok{(POP\_files, }\AttributeTok{full.names =} \ConstantTok{TRUE}\NormalTok{)}
\NormalTok{POP\_subdir }\OtherTok{\textless{}{-}}\NormalTok{ POP\_subdir[}\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{] }\CommentTok{\#removes parent directory}

\NormalTok{matching\_file }\OtherTok{\textless{}{-}} \FunctionTok{list}\NormalTok{()}

\ControlFlowTok{for}\NormalTok{ (subdir }\ControlFlowTok{in}\NormalTok{ POP\_subdir) \{}
\NormalTok{  file\_list }\OtherTok{\textless{}{-}} \FunctionTok{list.files}\NormalTok{(subdir, }\AttributeTok{full.names =} \ConstantTok{TRUE}\NormalTok{, }\AttributeTok{pattern =} \StringTok{"}\SpecialCharTok{\textbackslash{}\textbackslash{}}\StringTok{.xpt$"}\NormalTok{)}
\NormalTok{  year\_files }\OtherTok{\textless{}{-}}\NormalTok{ file\_list[}\FunctionTok{str\_detect}\NormalTok{(file\_list, }\StringTok{"2007"}\NormalTok{)]}
  
  \ControlFlowTok{if}\NormalTok{ (}\FunctionTok{length}\NormalTok{(year\_files) }\SpecialCharTok{\textgreater{}} \DecValTok{0}\NormalTok{)\{}
\NormalTok{    matching\_file[[subdir]] }\OtherTok{\textless{}{-}}\NormalTok{ year\_files}
\NormalTok{  \}}
\NormalTok{\}}

\NormalTok{matching\_file }\OtherTok{\textless{}{-}} \FunctionTok{unlist}\NormalTok{(matching\_file, }\AttributeTok{use.names =} \ConstantTok{FALSE}\NormalTok{)}

\CommentTok{\# read each file into a list}
\NormalTok{data }\OtherTok{\textless{}{-}} \FunctionTok{map}\NormalTok{(matching\_file, read\_xpt)}
\FunctionTok{names}\NormalTok{(data) }\OtherTok{\textless{}{-}} \FunctionTok{basename}\NormalTok{(matching\_file)}

\CommentTok{\# unique SEQNs from all laboratory files}
\NormalTok{new\_seqn\_data }\OtherTok{\textless{}{-}}\NormalTok{ data }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{map}\NormalTok{(}\SpecialCharTok{\textasciitilde{}} \FunctionTok{pull}\NormalTok{(.x, SEQN)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{unlist}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{unique}\NormalTok{()}

\CommentTok{\# include only participants with laboratory (POP) data}
\NormalTok{filtered\_demoData }\OtherTok{\textless{}{-}}\NormalTok{ demoData }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(SEQN }\SpecialCharTok{\%in\%}\NormalTok{ new\_seqn\_data)}

\NormalTok{final\_demoData }\OtherTok{\textless{}{-}}\NormalTok{ filtered\_demoData }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(SEQN }\SpecialCharTok{\%in\%}\NormalTok{ DI\_data1}\SpecialCharTok{$}\NormalTok{SEQN)}
\end{Highlighting}
\end{Shaded}

\subsubsection{Demographic Data
Analysis}\label{demographic-data-analysis}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(dplyr)}
\FunctionTok{library}\NormalTok{(knitr)}
\FunctionTok{library}\NormalTok{(kableExtra)}

\CommentTok{\#{-}{-}{-}{-}SEX{-}{-}{-}{-}{-}}

\NormalTok{sex\_summary }\OtherTok{\textless{}{-}}\NormalTok{ final\_demoData }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{Sex =} \FunctionTok{case\_when}\NormalTok{(}
\NormalTok{    RIAGENDR }\SpecialCharTok{==} \DecValTok{1} \SpecialCharTok{\textasciitilde{}} \StringTok{"Male"}\NormalTok{,}
\NormalTok{    RIAGENDR }\SpecialCharTok{==} \DecValTok{2} \SpecialCharTok{\textasciitilde{}} \StringTok{"Female"}\NormalTok{,}
    \ConstantTok{TRUE}          \SpecialCharTok{\textasciitilde{}} \StringTok{"Other / Unknown"}
\NormalTok{  )) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{count}\NormalTok{(Sex) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{percent =} \FunctionTok{round}\NormalTok{(n }\SpecialCharTok{/} \FunctionTok{sum}\NormalTok{(n) }\SpecialCharTok{*} \DecValTok{100}\NormalTok{, }\DecValTok{1}\NormalTok{), }
    \AttributeTok{N\_val =} \FunctionTok{paste0}\NormalTok{(n, }\StringTok{" ("}\NormalTok{, percent, }\StringTok{"\%)"}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{select}\NormalTok{(Sex, N\_val)}

\NormalTok{sex\_block }\OtherTok{\textless{}{-}} \FunctionTok{bind\_rows}\NormalTok{(}
  \FunctionTok{tibble}\NormalTok{(}\AttributeTok{Sex =} \StringTok{"Sex"}\NormalTok{, }\AttributeTok{N\_val =} \ConstantTok{NA\_character\_}\NormalTok{),}
\NormalTok{  sex\_summary}
\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{rename}\NormalTok{(}\AttributeTok{Table =}\NormalTok{ Sex, }\AttributeTok{N =}\NormalTok{ N\_val)}

\CommentTok{\# {-}{-}{-}{-}RACE/ETHNICITY{-}{-}{-}{-}}

\NormalTok{race\_summary }\OtherTok{\textless{}{-}}\NormalTok{ final\_demoData }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{RaceEth =} \FunctionTok{case\_when}\NormalTok{(}
\NormalTok{    RIDRETH1 }\SpecialCharTok{==} \DecValTok{1} \SpecialCharTok{\textasciitilde{}} \StringTok{"Mexican American"}\NormalTok{,}
\NormalTok{    RIDRETH1 }\SpecialCharTok{==} \DecValTok{2} \SpecialCharTok{\textasciitilde{}} \StringTok{"Other Hispanic"}\NormalTok{,}
\NormalTok{    RIDRETH1 }\SpecialCharTok{==} \DecValTok{3} \SpecialCharTok{\textasciitilde{}} \StringTok{"Non{-}Hispanic White"}\NormalTok{,}
\NormalTok{    RIDRETH1 }\SpecialCharTok{==} \DecValTok{4} \SpecialCharTok{\textasciitilde{}} \StringTok{"Non{-}Hispanic Black"}\NormalTok{,}
\NormalTok{    RIDRETH1 }\SpecialCharTok{==} \DecValTok{5} \SpecialCharTok{\textasciitilde{}} \StringTok{"Other Race/Multiracial"}\NormalTok{,}
    \ConstantTok{TRUE}          \SpecialCharTok{\textasciitilde{}} \StringTok{"Unknown"}
\NormalTok{  )) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{count}\NormalTok{(RaceEth) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{percent =} \FunctionTok{round}\NormalTok{(n }\SpecialCharTok{/} \FunctionTok{sum}\NormalTok{(n) }\SpecialCharTok{*} \DecValTok{100}\NormalTok{, }\DecValTok{1}\NormalTok{),}
         \AttributeTok{N\_val =} \FunctionTok{paste0}\NormalTok{(n, }\StringTok{" ("}\NormalTok{, percent, }\StringTok{"\%)"}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{select}\NormalTok{(RaceEth, N\_val)}

\NormalTok{race\_block }\OtherTok{\textless{}{-}} \FunctionTok{bind\_rows}\NormalTok{(}
  \FunctionTok{tibble}\NormalTok{(}\AttributeTok{RaceEth =} \StringTok{"Race/Ethnicity"}\NormalTok{, }\AttributeTok{N\_val =} \ConstantTok{NA\_character\_}\NormalTok{),}
\NormalTok{  race\_summary}
\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{rename}\NormalTok{(}\AttributeTok{Table =}\NormalTok{ RaceEth, }\AttributeTok{N =}\NormalTok{ N\_val)}

\CommentTok{\# {-}{-}{-}{-}HOUSEHOLD INCOME{-}{-}{-}{-}}

\NormalTok{income\_summary }\OtherTok{\textless{}{-}}\NormalTok{ final\_demoData }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{filter}\NormalTok{(INDFMIN2 }\SpecialCharTok{\%in\%} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{,}\DecValTok{2}\NormalTok{,}\DecValTok{3}\NormalTok{,}\DecValTok{4}\NormalTok{,}\DecValTok{5}\NormalTok{,}\DecValTok{6}\NormalTok{,}\DecValTok{7}\NormalTok{,}\DecValTok{8}\NormalTok{,}\DecValTok{9}\NormalTok{,}\DecValTok{10}\NormalTok{,}\DecValTok{14}\NormalTok{,}\DecValTok{15}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{IncomeGroup =} \FunctionTok{case\_when}\NormalTok{(}
\NormalTok{    INDFMIN2 }\SpecialCharTok{\%in\%} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{,}\DecValTok{2}\NormalTok{,}\DecValTok{3}\NormalTok{,}\DecValTok{4}\NormalTok{) }\SpecialCharTok{\textasciitilde{}} \StringTok{"$ 0 {-} $20,000"}\NormalTok{,}
\NormalTok{    INDFMIN2 }\SpecialCharTok{\%in\%} \FunctionTok{c}\NormalTok{(}\DecValTok{5}\NormalTok{,}\DecValTok{6}\NormalTok{) }\SpecialCharTok{\textasciitilde{}} \StringTok{"$20,000 {-} $35,000"}\NormalTok{,}
\NormalTok{    INDFMIN2 }\SpecialCharTok{\%in\%} \FunctionTok{c}\NormalTok{(}\DecValTok{7}\NormalTok{,}\DecValTok{8}\NormalTok{,}\DecValTok{9}\NormalTok{,}\DecValTok{10}\NormalTok{) }\SpecialCharTok{\textasciitilde{}} \StringTok{"$35,000 to $75,000"}\NormalTok{,}
\NormalTok{    INDFMIN2 }\SpecialCharTok{\%in\%} \FunctionTok{c}\NormalTok{(}\DecValTok{14}\NormalTok{,}\DecValTok{15}\NormalTok{) }\SpecialCharTok{\textasciitilde{}} \StringTok{"$75,000+"}\NormalTok{,}
    \ConstantTok{TRUE} \SpecialCharTok{\textasciitilde{}} \ConstantTok{NA\_character\_}
\NormalTok{  )) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{count}\NormalTok{(IncomeGroup) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{percent =} \FunctionTok{round}\NormalTok{(n }\SpecialCharTok{/} \FunctionTok{sum}\NormalTok{(n) }\SpecialCharTok{*} \DecValTok{100}\NormalTok{, }\DecValTok{1}\NormalTok{),}
         \AttributeTok{N\_val =} \FunctionTok{paste0}\NormalTok{(n, }\StringTok{" ("}\NormalTok{, percent, }\StringTok{"\%)"}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{select}\NormalTok{(IncomeGroup, N\_val)}

\NormalTok{income\_block }\OtherTok{\textless{}{-}} \FunctionTok{bind\_rows}\NormalTok{(}
  \FunctionTok{tibble}\NormalTok{(}\AttributeTok{IncomeGroup =} \StringTok{"Household Income"}\NormalTok{, }\AttributeTok{N\_val =} \ConstantTok{NA\_character\_}\NormalTok{),}
\NormalTok{  income\_summary}
\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{rename}\NormalTok{(}\AttributeTok{Table =}\NormalTok{ IncomeGroup, }\AttributeTok{N =}\NormalTok{ N\_val)}

\CommentTok{\# {-}{-}{-}{-}FAMILY INCOME TO POVERTY RATIO{-}{-}{-}{-}}
\NormalTok{pir\_summary }\OtherTok{\textless{}{-}}\NormalTok{ final\_demoData }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{filter}\NormalTok{(}\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(INDFMPIR)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{INDFMPIR\_group =} \FunctionTok{cut}\NormalTok{(INDFMPIR,}
                              \AttributeTok{breaks =} \FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{, }\DecValTok{4}\NormalTok{, }\FloatTok{5.01}\NormalTok{),}
                              \AttributeTok{labels =} \FunctionTok{c}\NormalTok{(}\StringTok{"\textless{}1.0"}\NormalTok{, }\StringTok{"1.0 {-} 1.99"}\NormalTok{, }\StringTok{"2.0 {-} 2.99"}\NormalTok{, }\StringTok{"3.0 {-} 3.99"}\NormalTok{, }\StringTok{"4.0 {-} 5.0+"}\NormalTok{),}
                              \AttributeTok{right =} \ConstantTok{FALSE}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{count}\NormalTok{(INDFMPIR\_group) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{percent =} \FunctionTok{round}\NormalTok{(n }\SpecialCharTok{/} \FunctionTok{sum}\NormalTok{(n) }\SpecialCharTok{*} \DecValTok{100}\NormalTok{, }\DecValTok{1}\NormalTok{),}
         \AttributeTok{N\_val =} \FunctionTok{paste0}\NormalTok{(n, }\StringTok{" ("}\NormalTok{, percent, }\StringTok{"\%)"}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{select}\NormalTok{(INDFMPIR\_group, N\_val)}

\NormalTok{pir\_block }\OtherTok{\textless{}{-}} \FunctionTok{bind\_rows}\NormalTok{(}
  \FunctionTok{tibble}\NormalTok{(}\AttributeTok{INDFMPIR\_group =} \StringTok{"Ratio of Family Income to Poverty"}\NormalTok{, }\AttributeTok{N\_val =} \ConstantTok{NA\_character\_}\NormalTok{),}
\NormalTok{  pir\_summary}
\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{rename}\NormalTok{(}\AttributeTok{Table =}\NormalTok{ INDFMPIR\_group, }\AttributeTok{N =}\NormalTok{ N\_val)}

\CommentTok{\# {-}{-}{-}{-}COMBINE{-}{-}{-}{-}{-}}

\NormalTok{final\_summary }\OtherTok{\textless{}{-}} \FunctionTok{bind\_rows}\NormalTok{(}
\NormalTok{  sex\_block,}
\NormalTok{  race\_block,}
\NormalTok{  income\_block,}
\NormalTok{  pir\_block}
\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{select}\NormalTok{(Table, N) }\SpecialCharTok{\%\textgreater{}\%} \CommentTok{\# 2 columns}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{N =} \FunctionTok{if\_else}\NormalTok{(}\FunctionTok{is.na}\NormalTok{(N), }\StringTok{""}\NormalTok{, N)) }\CommentTok{\#remove NA values in N with empty string}

\CommentTok{\# determine header row indices}
\NormalTok{n\_sex }\OtherTok{\textless{}{-}} \FunctionTok{nrow}\NormalTok{(sex\_block)}
\NormalTok{n\_race }\OtherTok{\textless{}{-}} \FunctionTok{nrow}\NormalTok{(race\_block)}
\NormalTok{n\_income }\OtherTok{\textless{}{-}} \FunctionTok{nrow}\NormalTok{(income\_block)}
\NormalTok{n\_pir }\OtherTok{\textless{}{-}} \FunctionTok{nrow}\NormalTok{(pir\_block)}
\NormalTok{header\_rows }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, n\_sex }\SpecialCharTok{+} \DecValTok{1}\NormalTok{, n\_sex }\SpecialCharTok{+}\NormalTok{ n\_race }\SpecialCharTok{+} \DecValTok{1}\NormalTok{, n\_sex }\SpecialCharTok{+}\NormalTok{ n\_race }\SpecialCharTok{+}\NormalTok{ n\_income }\SpecialCharTok{+} \DecValTok{1}\NormalTok{)}

\CommentTok{\# \# {-}{-}{-}{-}POLISHED TABLE{-}{-}{-}{-}}

\NormalTok{kbl }\OtherTok{\textless{}{-}} \FunctionTok{kable}\NormalTok{(}
\NormalTok{  final\_summary,}
  \AttributeTok{col.names =} \FunctionTok{c}\NormalTok{(}\StringTok{"Table"}\NormalTok{, }\StringTok{"N"}\NormalTok{),}
  \AttributeTok{caption =} \StringTok{"Demographic Summary"}
\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{kable\_styling}\NormalTok{(}
    \AttributeTok{bootstrap\_options =} \FunctionTok{c}\NormalTok{(}\StringTok{"hover"}\NormalTok{, }\StringTok{"condensed"}\NormalTok{),}
    \AttributeTok{full\_width =} \ConstantTok{TRUE}\NormalTok{,}
    \AttributeTok{font\_size =} \DecValTok{14}\NormalTok{,  }\CommentTok{\# Larger text}
    \AttributeTok{latex\_options =} \FunctionTok{c}\NormalTok{(}\StringTok{"scale\_down"}\NormalTok{)}
\NormalTok{  ) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{column\_spec}\NormalTok{(}\DecValTok{1}\NormalTok{, }\AttributeTok{width =} \StringTok{"40\%"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{column\_spec}\NormalTok{(}\DecValTok{2}\NormalTok{, }\AttributeTok{width =} \StringTok{"20\%"}\NormalTok{)}

\CommentTok{\# Bold specific rows}
\ControlFlowTok{for}\NormalTok{ (row }\ControlFlowTok{in}\NormalTok{ header\_rows) \{}
\NormalTok{  kbl }\OtherTok{\textless{}{-}} \FunctionTok{row\_spec}\NormalTok{(kbl, row, }\AttributeTok{bold =} \ConstantTok{TRUE}\NormalTok{)}
\NormalTok{\}}

\NormalTok{kbl}
\end{Highlighting}
\end{Shaded}

\begingroup\fontsize{14}{16}\selectfont

\begin{longtabu} to \linewidth {>{\raggedright\arraybackslash}p{40%}>{\raggedright\arraybackslash}p{20%}}
\caption{\label{tab:demographic-summary}Demographic Summary}\\
\toprule
Table & N\\
\midrule
\textbf{Sex} & \textbf{}\\
Female & 4384 (49.8\%)\\
Male & 4426 (50.2\%)\\
\textbf{Race/Ethnicity} & \textbf{}\\
Mexican American & 1783 (20.2\%)\\
\addlinespace
Non-Hispanic Black & 1984 (22.5\%)\\
Non-Hispanic White & 3621 (41.1\%)\\
Other Hispanic & 1040 (11.8\%)\\
Other Race/Multiracial & 382 (4.3\%)\\
\textbf{Household Income} & \textbf{}\\
\addlinespace
\$ 0 - \$20,000 & 2104 (26.1\%)\\
\$20,000 - \$35,000 & 1909 (23.6\%)\\
\$35,000 to \$75,000 & 2339 (29\%)\\
\$75,000+ & 1720 (21.3\%)\\
\textbf{Ratio of Family Income to Poverty} & \textbf{}\\
\addlinespace
<1.0 & 2075 (25.7\%)\\
1.0 - 1.99 & 2212 (27.4\%)\\
2.0 - 2.99 & 1280 (15.9\%)\\
3.0 - 3.99 & 770 (9.5\%)\\
4.0 - 5.0+ & 1735 (21.5\%)\\
\bottomrule
\end{longtabu}
\endgroup{}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# kbl \textless{}{-} kable(}
\CommentTok{\#   final\_summary,}
\CommentTok{\#   col.names = c("Table", "N"),}
\CommentTok{\#   caption = "Demographic Summary"}
\CommentTok{\# ) \%\textgreater{}\%}
\CommentTok{\#   kable\_styling(}
\CommentTok{\#     bootstrap\_options = c("hover", "condensed"),}
\CommentTok{\#     full\_width = TRUE,}
\CommentTok{\#     font\_size = 10,}
\CommentTok{\#     latex\_options = c("scale\_down")}
\CommentTok{\#   )}
\CommentTok{\# }
\CommentTok{\# \# Bold header rows as before}
\CommentTok{\# for (row in header\_rows) \{}
\CommentTok{\#   kbl \textless{}{-} row\_spec(kbl, row, bold = TRUE)}
\CommentTok{\# \}}
\CommentTok{\# }
\CommentTok{\# kbl}
\end{Highlighting}
\end{Shaded}


\end{document}
